{{define "poll-results-partial"}}
<div
  id="poll-container"
  class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
  hx-get="/poll/{{ .WorkflowID }}/results"
  hx-trigger="every 2s"
  hx-swap="outerHTML"
>
  {{range .Options}} {{ $option := . }} {{ $imageURL := index $.ImageURLs
  $option }} {{ $votes := index $.State.Options $option }}

  <div class="text-center">
    <div
      class="relative rounded-lg overflow-hidden border-2 border-transparent hover:border-blue-500 transition-all duration-300 cursor-pointer"
      hx-post="/poll/{{ $.WorkflowID }}/vote"
      hx-target="#poll-container"
      hx-swap="innerHTML"
      hx-vals='{"option": "{{ $option }}"}'
    >
      {{if $imageURL}}
      <img
        src="{{ $imageURL }}"
        alt="{{ $option }}"
        class="w-full h-auto object-cover"
      />
      {{else}}
      <div class="w-full h-48 bg-gray-800 flex items-center justify-center">
        <span class="text-gray-500">Image not available</span>
      </div>
      {{end}}
    </div>
    <h3 class="text-xl font-semibold mt-4">{{ $option }}</h3>
    <p class="text-2xl font-bold cyber-text-glow">{{ or $votes 0 }}</p>
  </div>
  {{else}}
  <p class="text-center col-span-full">No options available for this poll.</p>
  {{end}}
</div>
{{end}}
