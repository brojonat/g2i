{{define "poll-results-partial"}}
<div id="poll-container" class="flex flex-wrap justify-center gap-6">
  {{range .Options}} {{ $option := . }}

  <div class="text-center w-64">
    <div
      id="poll-profile-{{ $.WorkflowID }}-{{ $option }}"
      class="relative rounded-lg overflow-hidden border-2 border-transparent w-full h-48 bg-gray-800"
      hx-get="/poll/{{ $.WorkflowID }}/profile/{{ $option }}"
      hx-trigger="load"
      hx-swap="innerHTML"
    >
      <!-- Initial non-polling spinner -->
      <div class="w-full h-full flex flex-col items-center justify-center">
        <svg
          class="animate-spin h-10 w-10 text-blue-500 mb-2"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="4"
          ></circle>
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          ></path>
        </svg>
        <span class="text-gray-400 text-sm">Generating image...</span>
      </div>
    </div>
    <h3 class="text-xl font-semibold mt-4">{{ $option }}</h3>
    <div
      id="poll-votes-{{ $.WorkflowID }}-{{ $option }}"
      hx-get="/poll/{{ $.WorkflowID }}/votes/{{ $option }}"
      hx-trigger="load"
      hx-swap="innerHTML"
    >
      <p class="text-2xl font-bold cyber-text-glow">...</p>
    </div>
  </div>
  {{else}}
  <p class="text-center col-span-full">No options available for this poll.</p>
  {{end}}
</div>
{{end}}
